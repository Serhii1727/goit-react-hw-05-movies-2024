{"version":3,"file":"static/js/228.b90fb0b1.chunk.js","mappings":"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","sources":["components/services/api.js","components/services/support.js","webpack://react-homework-template/./src/pages/SearchMovies/SearchMovies.module.css?db5e","pages/SearchMovies/SearchMovies.jsx"],"sourcesContent":["import { API, options } from './support';\n\nexport const fetchGetTrendingMovies = () => {\n  return fetch(\n    'https://api.themoviedb.org/3/trending/all/day?language=en-US',\n    options\n  ).then(res => {\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(new Error('Oops, something went wrong'));\n  });\n};\n\nexport const fetchGetMovieDetails = id => {\n  return fetch(`${API.request}${id}?language=en-US`, options).then(res => {\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(new Error('Oops, something went wrong'));\n  });\n};\n\nexport const fetchGetCastMovie = id => {\n  return fetch(`${API.request}${id}/credits`, options).then(res => {\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(new Error('Oops, something went wrong'));\n  });\n};\n\nexport const fetchGetMovieReviews = id => {\n  return fetch(`${API.request}${id}/reviews`, options).then(res => {\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(new Error('Oops, something went wrong'));\n  });\n};\n\nexport const fetchSearchMovies = searchQuery => {\n  return fetch(\n    `${API.searchMovie}?query=${searchQuery}&include_adult=false&language=en-US&page=1`,\n    options\n  ).then(res => {\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(new Error('Oops, something went wrong'));\n  });\n};\n","export const API = {\n  request: 'https://api.themoviedb.org/3/movie/',\n  key: 'b95b13270f44be3e23d3c62e0852c09c',\n  token:\n    'eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJiOTViMTMyNzBmNDRiZTNlMjNkM2M2MmUwODUyYzA5YyIsInN1YiI6IjY1OTQzYTZkMDI4ZjE0NzY5NGM3MjJkNiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.cmSUhygmIIjUC6Ea5HsTcu7XR4RoGg8-6MjFJfqrV7k',\n  getImage: 'https://image.tmdb.org/t/p/w500',\n  searchMovie: 'https://api.themoviedb.org/3/search/movie',\n};\n\nexport const options = {\n  method: 'GET',\n  headers: {\n    accept: 'application/json',\n    Authorization: `Bearer ${API.token}`,\n  },\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"form\":\"SearchMovies_form__HxQNH\",\"input\":\"SearchMovies_input__erXo9\",\"button\":\"SearchMovies_button__B86kT\",\"searchList\":\"SearchMovies_searchList__lWO-5\",\"searchItem\":\"SearchMovies_searchItem__bPvY6\",\"link\":\"SearchMovies_link__Sr4dK\",\"error\":\"SearchMovies_error__K-13S\"};","import { useEffect, useState } from 'react';\nimport { useSearchParams, NavLink, useLocation } from 'react-router-dom';\nimport { ToastContainer, toast } from 'react-toastify';\nimport { FaSearch } from 'react-icons/fa';\nimport Loader from 'components/Loader';\nimport css from './SearchMovies.module.css';\nimport { fetchSearchMovies } from 'components/services/api';\n\nconst SearchMovies = () => {\n  const [listFilterMovies, setListFilterMovies] = useState([]);\n  const [searchInInput, setSearchInInput] = useState('');\n  const [status, setStatus] = useState('idle');\n  const [error, setError] = useState('');\n\n  const location = useLocation();\n\n  const [searchParam, setSearchParam] = useSearchParams();\n\n  const searchQuery = searchParam.get('query') ?? '';\n\n  useEffect(() => {\n    if (!searchQuery) {\n      return;\n    }\n    setStatus('pending');\n\n    fetchSearchMovies(searchQuery)\n      .then(({ results }) => {\n        console.log(results);\n        const searchMovies = results.map(({ id, title }) => {\n          return { id, title };\n        });\n        if (searchMovies.length === 0) {\n          setStatus('error');\n          setError(`Nothing found for your request \"${searchQuery}\"`);\n          return;\n        }\n\n        setListFilterMovies(searchMovies);\n        setStatus('resolved');\n      })\n      .catch(error => {\n        setStatus('error');\n        setError(error.message);\n      });\n  }, [searchQuery]);\n\n  const handleSubmit = event => {\n    event.preventDefault();\n    if (searchInInput.trim() === '') {\n      toast.warn('Please enter your request');\n      return;\n    }\n\n    setSearchParam({ query: searchInInput });\n\n    setSearchInInput('');\n  };\n\n  const changeInput = event => {\n    setSearchInInput(event.currentTarget.value);\n  };\n\n  return (\n    <>\n      <form className={css.form} onSubmit={handleSubmit}>\n        <input\n          type=\"text\"\n          className={css.input}\n          name=\"searchQuery\"\n          value={searchInInput}\n          onChange={changeInput}\n        ></input>\n        <button type=\"submit\" className={css.button}>\n          <FaSearch />\n        </button>\n      </form>\n      {status === 'pending' && <Loader />}\n      {status === 'error' && <h1 className={css.error}>{error}</h1>}\n      {status === 'resolved' && (\n        <ul className={css.searchList}>\n          {listFilterMovies.map(({ id, title }) => {\n            return (\n              <li className={css.searchItem} key={id}>\n                <NavLink\n                  className={css.link}\n                  to={`${id}`}\n                  state={{ from: location }}\n                >\n                  {title}\n                </NavLink>\n              </li>\n            );\n          })}\n        </ul>\n      )}\n\n      <ToastContainer position=\"top-right\" autoClose={3000} />\n    </>\n  );\n};\n\nexport default SearchMovies;\n"],"names":["fetchGetTrendingMovies","fetch","options","then","res","ok","json","Promise","reject","Error","fetchGetMovieDetails","id","concat","API","fetchGetCastMovie","fetchGetMovieReviews","fetchSearchMovies","searchQuery","request","key","token","getImage","searchMovie","method","headers","accept","Authorization","_searchParam$get","_useState","useState","_useState2","_slicedToArray","listFilterMovies","setListFilterMovies","_useState3","_useState4","searchInInput","setSearchInInput","_useState5","_useState6","status","setStatus","_useState7","_useState8","error","setError","location","useLocation","_useSearchParams","useSearchParams","_useSearchParams2","searchParam","setSearchParam","get","useEffect","_ref","results","console","log","searchMovies","map","_ref2","title","length","catch","message","_jsxs","_Fragment","children","className","css","onSubmit","event","preventDefault","trim","query","toast","_jsx","type","name","value","onChange","currentTarget","FaSearch","Loader","_ref3","NavLink","to","state","from","ToastContainer","position","autoClose"],"sourceRoot":""}